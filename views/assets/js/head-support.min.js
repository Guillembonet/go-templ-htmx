!function(){var e=null;function t(){}function r(r,a){if(r&&r.indexOf("<head")>-1){let n=document.createElement("html");var d=r.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"").match(/(<head(\s[^>]*>|>)([\s\S]*?)<\/head>)/im);if(d){var i=[],o=[],h=[],l=[];n.innerHTML=d;var u=n.querySelector("head"),m=document.head;if(null==u)return;var g=new Map;for(let s of u.children)g.set(s.outerHTML,s);var v=e.getAttributeValue(u,"hx-head")||a;for(let f of m.children){var p=g.has(f.outerHTML),c="re-eval"===f.getAttribute("hx-head"),x="true"===e.getAttributeValue(f,"hx-preserve");p||x?c?o.push(f):(g.delete(f.outerHTML),h.push(f)):"append"===v?c&&(o.push(f),l.push(f)):!1!==e.triggerEvent(document.body,"htmx:removingHeadElement",{headElement:f})&&o.push(f)}for(let E of(l.push(...g.values()),t("to append: ",l),l)){t("adding: ",E);var b=document.createRange().createContextualFragment(E.outerHTML);t(b),!1!==e.triggerEvent(document.body,"htmx:addingHeadElement",{headElement:b})&&(m.appendChild(b),i.push(b))}for(let H of o)!1!==e.triggerEvent(document.body,"htmx:removingHeadElement",{headElement:H})&&m.removeChild(H);e.triggerEvent(document.body,"htmx:afterHeadMerge",{added:i,kept:h,removed:o})}}}htmx.defineExtension("head-support",{init:function(t){e=t,htmx.on("htmx:afterSwap",function(t){var a=t.detail.xhr.response;e.triggerEvent(document.body,"htmx:beforeHeadMerge",t.detail)&&r(a,t.detail.boosted?"merge":"append")}),htmx.on("htmx:historyRestore",function(t){e.triggerEvent(document.body,"htmx:beforeHeadMerge",t.detail)&&(t.detail.cacheMiss?r(t.detail.serverResponse,"merge"):r(t.detail.item.head,"merge"))}),htmx.on("htmx:historyItemCreated",function(e){e.detail.item.head=document.head.outerHTML})}})}();